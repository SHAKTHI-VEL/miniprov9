{"ast":null,"code":"var _jsxFileName = \"/home/shakthivel/Documents/mini-project/src/context/context.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nconst initialState = [];\nexport const ExpenseTrackerContext = /*#__PURE__*/createContext(initialState);\nexport const Provider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [transactions, settransactions] = useState(initialState); //Action Creators\n  // const getTransactions=async (transaction)=>{\n  //   const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n  //     method: 'GET', \n  //     headers: {\n  //       'Content-Type': 'application/json',\n  //       \"auth-token\":localStorage.getItem('token')\n  //     },\n  //  });\n  //  const json=await response.json(); \n  //    settransactions(json)\n  // }\n\n  const addTransaction = async transaction => {\n    const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        \"auth-token\": localStorage.getItem('token')\n      },\n      body: JSON.stringify({\n        transaction\n      })\n    });\n    const tran = await response.json();\n    settransactions(transactions.concat(tran));\n  };\n\n  const deleteTransaction = async id => {\n    const response = await fetch(`http://localhost:5000/api/v1/transactions/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        \"auth-token\": localStorage.getItem('token')\n      }\n    });\n    const json = response.json();\n    const newTransaction = transactions.filter(note => {\n      return transactions._id !== id;\n    });\n    settransactions(newTransaction);\n  };\n\n  const balance = transactions.reduce((acc, currVal) => currVal.type === 'Expense' ? acc - currVal.amount : acc + currVal.amount, 0);\n  console.log(transactions);\n  return /*#__PURE__*/React.createElement(ExpenseTrackerContext.Provider, {\n    value: {\n      getTransactions,\n      deleteTransaction,\n      addTransaction,\n      transactions,\n      balance\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, children);\n};\n\n_s(Provider, \"RFqSvLn0oUdQiO5r7d5SxmR9LuY=\");\n\n_c = Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"names":["React","createContext","useState","axios","initialState","ExpenseTrackerContext","Provider","children","transactions","settransactions","addTransaction","transaction","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","tran","json","concat","deleteTransaction","id","newTransaction","filter","note","_id","balance","reduce","acc","currVal","type","amount","console","log","getTransactions"],"sources":["/home/shakthivel/Documents/mini-project/src/context/context.js"],"sourcesContent":["import React, { createContext ,useState} from 'react';\n\nimport axios from 'axios';\n\n\nconst initialState = []\n\n\n\nexport const ExpenseTrackerContext = createContext(initialState);\n\nexport const Provider = ({ children }) => {\n  const [transactions,settransactions]=useState(initialState)\n   \n\n    //Action Creators\n   \n    // const getTransactions=async (transaction)=>{\n    //   const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n    //     method: 'GET', \n        \n    //     headers: {\n    //       'Content-Type': 'application/json',\n    //       \"auth-token\":localStorage.getItem('token')\n    //     },\n      \n  \n    //  });\n    //  const json=await response.json(); \n      \n    //    settransactions(json)\n    \n    // }\n\n    const addTransaction=async (transaction)=>{\n      const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n        method: 'POST', \n        \n        headers: {\n          'Content-Type': 'application/json',\n          \"auth-token\":localStorage.getItem('token')\n        },\n      \n        body: JSON.stringify({transaction}) \n     });\n     const tran=await response.json(); \n     settransactions(transactions.concat(tran))\n       \n    }\n\n    const  deleteTransaction=async (id)=>{\n      const response = await fetch(`http://localhost:5000/api/v1/transactions/${id}`, {\n       \n        method: 'DELETE', \n        \n        headers: {\n          'Content-Type': 'application/json',\n          \"auth-token\":localStorage.getItem('token')\n        },\n      \n     \n       \n     });\n     const json= response.json(); \n    \n      \n    \n      const newTransaction=transactions.filter((note)=>{return transactions._id!==id});\n      settransactions(newTransaction)\n    }\n\n\n          \n\n    const balance = transactions.reduce((acc, currVal) => (currVal.type === 'Expense' ? acc - currVal.amount : acc + currVal.amount), 0);\n\n    console.log(transactions);\n\n  \n\n    return (\n        <ExpenseTrackerContext.Provider value={{\n            getTransactions,\n            deleteTransaction,\n            addTransaction,\n            transactions,\n            balance\n        }}>\n            {children}\n        </ExpenseTrackerContext.Provider>\n    )\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,QAA8C,OAA9C;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,MAAMC,YAAY,GAAG,EAArB;AAIA,OAAO,MAAMC,qBAAqB,gBAAGJ,aAAa,CAACG,YAAD,CAA3C;AAEP,OAAO,MAAME,QAAQ,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACxC,MAAM,CAACC,YAAD,EAAcC,eAAd,IAA+BP,QAAQ,CAACE,YAAD,CAA7C,CADwC,CAItC;EAEA;EACA;EACA;EAEA;EACA;EACA;EACA;EAGA;EACA;EAEA;EAEA;;EAEA,MAAMM,cAAc,GAAC,MAAOC,WAAP,IAAqB;IACxC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,2CAAF,EAA8C;MACxEC,MAAM,EAAE,MADgE;MAGxEC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,cAAaC,YAAY,CAACC,OAAb,CAAqB,OAArB;MAFN,CAH+D;MAQxEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAACT;MAAD,CAAf;IARkE,CAA9C,CAA5B;IAUD,MAAMU,IAAI,GAAC,MAAMT,QAAQ,CAACU,IAAT,EAAjB;IACAb,eAAe,CAACD,YAAY,CAACe,MAAb,CAAoBF,IAApB,CAAD,CAAf;EAEA,CAdD;;EAgBA,MAAOG,iBAAiB,GAAC,MAAOC,EAAP,IAAY;IACnC,MAAMb,QAAQ,GAAG,MAAMC,KAAK,CAAE,6CAA4CY,EAAG,EAAjD,EAAoD;MAE9EX,MAAM,EAAE,QAFsE;MAI9EC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,cAAaC,YAAY,CAACC,OAAb,CAAqB,OAArB;MAFN;IAJqE,CAApD,CAA5B;IAYD,MAAMK,IAAI,GAAEV,QAAQ,CAACU,IAAT,EAAZ;IAIC,MAAMI,cAAc,GAAClB,YAAY,CAACmB,MAAb,CAAqBC,IAAD,IAAQ;MAAC,OAAOpB,YAAY,CAACqB,GAAb,KAAmBJ,EAA1B;IAA6B,CAA1D,CAArB;IACAhB,eAAe,CAACiB,cAAD,CAAf;EACD,CAnBD;;EAwBA,MAAMI,OAAO,GAAGtB,YAAY,CAACuB,MAAb,CAAoB,CAACC,GAAD,EAAMC,OAAN,KAAmBA,OAAO,CAACC,IAAR,KAAiB,SAAjB,GAA6BF,GAAG,GAAGC,OAAO,CAACE,MAA3C,GAAoDH,GAAG,GAAGC,OAAO,CAACE,MAAzG,EAAkH,CAAlH,CAAhB;EAEAC,OAAO,CAACC,GAAR,CAAY7B,YAAZ;EAIA,oBACI,oBAAC,qBAAD,CAAuB,QAAvB;IAAgC,KAAK,EAAE;MACnC8B,eADmC;MAEnCd,iBAFmC;MAGnCd,cAHmC;MAInCF,YAJmC;MAKnCsB;IALmC,CAAvC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAOKvB,QAPL,CADJ;AAWH,CAhFM;;GAAMD,Q;;KAAAA,Q"},"metadata":{},"sourceType":"module"}