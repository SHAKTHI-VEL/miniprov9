{"ast":null,"code":"import _regeneratorRuntime from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useReducer,createContext}from'react';import contextReducer from'./contextReducer';import axios from'axios';var initialState=JSON.parse(sessionStorage.getItem('transactions'))||[];export var ExpenseTrackerContext=/*#__PURE__*/createContext(initialState);export var Provider=function Provider(_ref){var children=_ref.children;var _useReducer=useReducer(contextReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),transactions=_useReducer2[0],dispatch=_useReducer2[1];//Action Creators\n// async function deleteTransaction(id) {\n//     const config = {\n//         headers: {\n//             'Content-Type': 'application/json',\n//           'auth-token':localStorage.getItem('token')\n//         }\n//       }\n//       await axios.delete(`https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions/${id}`,config);\n//       dispatch({\n//         type: 'DELETE_TRANSACTION',\n//         payload:id\n//       });\n//   }\nvar deleteTransaction=function deleteTransaction(id){dispatch({type:'DELETE_TRANSACTION',payload:id});};function addTransaction(_x){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(transaction){var config,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json','auth-token':localStorage.getItem('token')}};_context.next=3;return axios.post('https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions',transaction,config);case 3:res=_context.sent;dispatch({type:'ADD_TRANSACTION',payload:transaction});case 5:case\"end\":return _context.stop();}}},_callee);}));return _addTransaction.apply(this,arguments);}function getTransactions(){return _getTransactions.apply(this,arguments);}function _getTransactions(){_getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var config,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json','auth-token':localStorage.getItem('token')}};_context2.next=3;return axios.get('https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions',config);case 3:res=_context2.sent;dispatch({type:'GET_TRANSACTIONS',payload:res.data});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _getTransactions.apply(this,arguments);}var balance=transactions.reduce(function(acc,currVal){return currVal.type==='Expense'?acc-currVal.amount:acc+currVal.amount;},0);console.log(transactions);return/*#__PURE__*/React.createElement(ExpenseTrackerContext.Provider,{value:{getTransactions:getTransactions,deleteTransaction:deleteTransaction,addTransaction:addTransaction,transactions:transactions,balance:balance}},children);};","map":{"version":3,"names":["React","useReducer","createContext","contextReducer","axios","initialState","JSON","parse","sessionStorage","getItem","ExpenseTrackerContext","Provider","children","transactions","dispatch","deleteTransaction","id","type","payload","addTransaction","transaction","config","headers","localStorage","post","res","getTransactions","get","data","balance","reduce","acc","currVal","amount","console","log"],"sources":["/home/shakthivel/Documents/mini-project/src/context/context.js"],"sourcesContent":["import React, { useReducer, createContext } from 'react';\nimport contextReducer from './contextReducer';\nimport axios from 'axios';\n\n\nconst initialState = JSON.parse(sessionStorage.getItem('transactions')) || []\n\n\n\nexport const ExpenseTrackerContext = createContext(initialState);\n\nexport const Provider = ({ children }) => {\n    const [ transactions,dispatch] = useReducer(contextReducer, initialState);\n\n    //Action Creators\n    // async function deleteTransaction(id) {\n    //     const config = {\n    //         headers: {\n    //             'Content-Type': 'application/json',\n    //           'auth-token':localStorage.getItem('token')\n    //         }\n    //       }\n        \n    //       await axios.delete(`https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions/${id}`,config);\n    \n    //       dispatch({\n    //         type: 'DELETE_TRANSACTION',\n    //         payload:id\n    //       });\n      \n    //   }\n    \n\n\n    const deleteTransaction = (id) => {\n      dispatch({ type: 'DELETE_TRANSACTION', payload: id })\n  }\n      async function addTransaction(transaction) {\n        const config = {\n          headers: {\n            'Content-Type': 'application/json',\n            'auth-token':localStorage.getItem('token')\n          }\n        }\n    const res = await axios.post('https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions', transaction, config);\n    \n          dispatch({\n            type: 'ADD_TRANSACTION',\n            payload: transaction\n          });\n        }\n\n\n        async function getTransactions() {\n            const config = {\n                headers: {\n                  'Content-Type': 'application/json',\n                  'auth-token':localStorage.getItem('token')\n                }\n              }\n          \n              const res = await axios.get('https://fintrackbackend-production-89dd.up.railway.app/api/v1/transactions',config);\n            \n              dispatch({\n                type: 'GET_TRANSACTIONS',\n                payload: res.data\n              });\n            \n          }\n\n\n          \n\n    const balance = transactions.reduce((acc, currVal) => (currVal.type === 'Expense' ? acc - currVal.amount : acc + currVal.amount), 0);\n\n    console.log(transactions);\n\n  \n\n    return (\n        <ExpenseTrackerContext.Provider value={{\n            getTransactions,\n            deleteTransaction,\n            addTransaction,\n            transactions,\n            balance\n        }}>\n            {children}\n        </ExpenseTrackerContext.Provider>\n    )\n}"],"mappings":"uYAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,aAA5B,KAAiD,OAAjD,CACA,MAAOC,eAAP,KAA2B,kBAA3B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAGA,GAAMC,aAAY,CAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAX,GAAsD,EAA3E,CAIA,MAAO,IAAMC,sBAAqB,cAAGR,aAAa,CAACG,YAAD,CAA3C,CAEP,MAAO,IAAMM,SAAQ,CAAG,QAAXA,SAAW,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CACtC,gBAAiCX,UAAU,CAACE,cAAD,CAAiBE,YAAjB,CAA3C,4CAAQQ,YAAR,iBAAqBC,QAArB,iBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAIA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,EAAD,CAAQ,CAChCF,QAAQ,CAAC,CAAEG,IAAI,CAAE,oBAAR,CAA8BC,OAAO,CAAEF,EAAvC,CAAD,CAAR,CACH,CAFC,CAvBsC,QA0BrBG,eA1BqB,wJA0BpC,iBAA8BC,WAA9B,mIACQC,MADR,CACiB,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,aAAaC,YAAY,CAACd,OAAb,CAAqB,OAArB,CAFN,CADI,CADjB,uBAOgBL,MAAK,CAACoB,IAAN,CAAW,4EAAX,CAAyFJ,WAAzF,CAAsGC,MAAtG,CAPhB,QAOII,GAPJ,eASIX,QAAQ,CAAC,CACPG,IAAI,CAAE,iBADC,CAEPC,OAAO,CAAEE,WAFF,CAAD,CAAR,CATJ,sDA1BoC,yDA0CnBM,gBA1CmB,yJA0ClC,yJACUL,MADV,CACmB,CACXC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,aAAaC,YAAY,CAACd,OAAb,CAAqB,OAArB,CAFN,CADE,CADnB,wBAQwBL,MAAK,CAACuB,GAAN,CAAU,4EAAV,CAAuFN,MAAvF,CARxB,QAQYI,GARZ,gBAUMX,QAAQ,CAAC,CACPG,IAAI,CAAE,kBADC,CAEPC,OAAO,CAAEO,GAAG,CAACG,IAFN,CAAD,CAAR,CAVN,wDA1CkC,kDA8DtC,GAAMC,QAAO,CAAGhB,YAAY,CAACiB,MAAb,CAAoB,SAACC,GAAD,CAAMC,OAAN,QAAmBA,QAAO,CAACf,IAAR,GAAiB,SAAjB,CAA6Bc,GAAG,CAAGC,OAAO,CAACC,MAA3C,CAAoDF,GAAG,CAAGC,OAAO,CAACC,MAArF,EAApB,CAAkH,CAAlH,CAAhB,CAEAC,OAAO,CAACC,GAAR,CAAYtB,YAAZ,EAIA,mBACI,oBAAC,qBAAD,CAAuB,QAAvB,EAAgC,KAAK,CAAE,CACnCa,eAAe,CAAfA,eADmC,CAEnCX,iBAAiB,CAAjBA,iBAFmC,CAGnCI,cAAc,CAAdA,cAHmC,CAInCN,YAAY,CAAZA,YAJmC,CAKnCgB,OAAO,CAAPA,OALmC,CAAvC,EAOKjB,QAPL,CADJ,CAWH,CA/EM"},"metadata":{},"sourceType":"module"}