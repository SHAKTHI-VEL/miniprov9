{"ast":null,"code":"import _defineProperty from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/shakthivel/Documents/mini-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./form.css';var Login=function Login(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"https://fintrackbackend-production-89dd.up.railway.app/api/auth/login\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:credentials.email,password:credentials.password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;console.log(json);if(json.success){// Save the auth token and redirect\nlocalStorage.setItem('token',json.authtoken);navigate(\"/dashboard\");}else{alert(\"Invalid credentials\");}case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-2\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"my-2\"},\"Login to continue...\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 my-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\",className:\"form-label\"},\"Email address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",value:credentials.email,onChange:onChange,id:\"email\",name:\"email\",\"aria-describedby\":\"emailHelp\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"emailHelp\",className:\"form-text\"},\"We'll never share your email with anyone else.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",className:\"form-label\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",value:credentials.password,onChange:onChange,name:\"password\",id:\"password\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Submit\")));};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","Login","props","email","password","credentials","setCredentials","navigate","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","console","log","success","localStorage","setItem","authtoken","alert","onChange","target","name","value"],"sources":["/home/shakthivel/Documents/mini-project/src/components/test/Login.js"],"sourcesContent":["\nimport React, {useState} from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport './form.css'\n\nconst Login = (props) => {\n    const [credentials, setCredentials] = useState({email: \"\", password: \"\"}) \n    let navigate = useNavigate();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const response = await fetch(\"https://fintrackbackend-production-89dd.up.railway.app/api/auth/login\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({email: credentials.email, password: credentials.password})\n        });\n        const json = await response.json()\n        console.log(json);\n        if (json.success){\n            // Save the auth token and redirect\n            localStorage.setItem('token', json.authtoken); \n            navigate(\"/dashboard\");\n\n        }\n        else{\n            alert(\"Invalid credentials\");\n        }\n    }\n\n    const onChange = (e)=>{\n        setCredentials({...credentials, [e.target.name]: e.target.value})\n    }\n\n    return (\n        <div  className=\"container mt-2\" >\n            <h1 className=\"my-2\">Login to continue...</h1>\n            <form  onSubmit={handleSubmit}>\n                <div className=\"mb-3 my-3\">\n                    <label htmlFor=\"email\" className=\"form-label\">Email address</label>\n                    <input type=\"email\" className=\"form-control\" value={credentials.email} onChange={onChange} id=\"email\" name=\"email\" aria-describedby=\"emailHelp\" />\n                    <div id=\"emailHelp\" className=\"form-text\">We'll never share your email with anyone else.</div>\n                </div>\n                <div className=\"mb-3\">\n                    <label htmlFor=\"password\" className=\"form-label\">Password</label>\n                    <input type=\"password\" className=\"form-control\" value={credentials.password} onChange={onChange} name=\"password\" id=\"password\" />\n                </div>\n\n                <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Login"],"mappings":"koBACA,MAAOA,MAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAO,YAAP,CAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,CAACC,KAAD,CAAW,CACrB,cAAsCH,QAAQ,CAAC,CAACI,KAAK,CAAE,EAAR,CAAYC,QAAQ,CAAE,EAAtB,CAAD,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eACA,GAAIC,SAAQ,CAAGP,WAAW,EAA1B,CAEA,GAAMQ,aAAY,4FAAG,iBAAOC,CAAP,sIACjBA,CAAC,CAACC,cAAF,GADiB,sBAEMC,MAAK,CAAC,uEAAD,CAA0E,CAClGC,MAAM,CAAE,MAD0F,CAElGC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFyF,CAKlGC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACb,KAAK,CAAEE,WAAW,CAACF,KAApB,CAA2BC,QAAQ,CAAEC,WAAW,CAACD,QAAjD,CAAf,CAL4F,CAA1E,CAFX,QAEXa,QAFW,qCASEA,SAAQ,CAACC,IAAT,EATF,QASXA,IATW,eAUjBC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACG,OAAT,CAAiB,CACb;AACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BL,IAAI,CAACM,SAAnC,EACAjB,QAAQ,CAAC,YAAD,CAAR,CAEH,CALD,IAMI,CACAkB,KAAK,CAAC,qBAAD,CAAL,CACH,CAnBgB,sDAAH,kBAAZjB,aAAY,4CAAlB,CAsBA,GAAMkB,SAAQ,CAAG,QAAXA,SAAW,CAACjB,CAAD,CAAK,CAClBH,cAAc,gCAAKD,WAAL,wBAAmBI,CAAC,CAACkB,MAAF,CAASC,IAA5B,CAAmCnB,CAAC,CAACkB,MAAF,CAASE,KAA5C,GAAd,CACH,CAFD,CAIA,mBACI,2BAAM,SAAS,CAAC,gBAAhB,eACI,0BAAI,SAAS,CAAC,MAAd,yBADJ,cAEI,4BAAO,QAAQ,CAAErB,YAAjB,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,YAAjC,kBADJ,cAEI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,KAAK,CAAEH,WAAW,CAACF,KAAhE,CAAuE,QAAQ,CAAEuB,QAAjF,CAA2F,EAAE,CAAC,OAA9F,CAAsG,IAAI,CAAC,OAA3G,CAAmH,mBAAiB,WAApI,EAFJ,cAGI,2BAAK,EAAE,CAAC,WAAR,CAAoB,SAAS,CAAC,WAA9B,mDAHJ,CADJ,cAMI,2BAAK,SAAS,CAAC,MAAf,eACI,6BAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,YAApC,aADJ,cAEI,6BAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,KAAK,CAAErB,WAAW,CAACD,QAAnE,CAA6E,QAAQ,CAAEsB,QAAvF,CAAiG,IAAI,CAAC,UAAtG,CAAiH,EAAE,CAAC,UAApH,EAFJ,CANJ,cAWI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,WAXJ,CAFJ,CADJ,CAkBH,CAhDD,CAkDA,cAAezB,MAAf"},"metadata":{},"sourceType":"module"}