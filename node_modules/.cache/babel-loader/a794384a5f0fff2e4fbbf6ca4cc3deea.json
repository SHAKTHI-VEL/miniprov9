{"ast":null,"code":"var _jsxFileName = \"/home/shakthivel/Documents/mini-project/src/context/context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, createContext } from 'react';\nimport contextReducer from './contextReducer';\nconst initialState = {\n  transactions: []\n};\nexport const ExpenseTrackerContext = /*#__PURE__*/createContext(initialState.transactions);\nexport const Provider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [transactions, dispatch] = useReducer(contextReducer, initialState.transactions); //Action Creators\n\n  const getTransactions = async transactions => {\n    const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        \"auth-token\": localStorage.getItem('token')\n      }\n    });\n    const json = await response.json();\n    dispatch({\n      type: 'GET_TRANSACTIONS',\n      payload: json\n    });\n  };\n\n  const addTransaction = async transaction => {\n    const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        \"auth-token\": localStorage.getItem('token')\n      },\n      body: JSON.stringify({\n        transaction\n      })\n    });\n    const trans = await response.json;\n    dispatch({\n      type: 'ADD_TRANSACTION',\n      payload: trans\n    });\n  };\n\n  const deleteTransaction = async id => {\n    const response = await fetch(`http://localhost:5000/api/v1/transactions/{id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        \"auth-token\": localStorage.getItem('token')\n      }\n    });\n    dispatch({\n      type: 'DELETE_TRANSACTION',\n      payload: id\n    });\n  };\n\n  const balance = transactions.reduce((acc, currVal) => currVal.type === 'Expense' ? acc - currVal.amount : acc + currVal.amount, 0);\n  console.log(transactions);\n  return /*#__PURE__*/React.createElement(ExpenseTrackerContext.Provider, {\n    value: {\n      getTransactions,\n      deleteTransaction,\n      addTransaction,\n      transactions,\n      balance\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, children);\n};\n\n_s(Provider, \"82CSyL2UOgqGh1KkHtPZ/mFRAJI=\");\n\n_c = Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"names":["React","useReducer","createContext","contextReducer","initialState","transactions","ExpenseTrackerContext","Provider","children","dispatch","getTransactions","response","fetch","method","headers","localStorage","getItem","json","type","payload","addTransaction","transaction","body","JSON","stringify","trans","deleteTransaction","id","balance","reduce","acc","currVal","amount","console","log"],"sources":["/home/shakthivel/Documents/mini-project/src/context/context.js"],"sourcesContent":["import React, { useReducer, createContext } from 'react';\nimport contextReducer from './contextReducer';\n\n\nconst initialState = {\n    transactions:[]\n}\n\nexport const ExpenseTrackerContext = createContext(initialState.transactions);\n\nexport const Provider = ({ children }) => {\n    const [transactions, dispatch] = useReducer(contextReducer, initialState.transactions);\n\n    //Action Creators\n\n    const getTransactions=async (transactions)=>{\n        const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n            method: 'GET', \n            \n            headers: {\n              'Content-Type': 'application/json',\n              \"auth-token\":localStorage.getItem('token')\n            },\n          \n      \n         });\n         const json=await response.json(); \n         dispatch({\n            type: 'GET_TRANSACTIONS',\n            payload: json\n          });\n           \n    }\n     \n\n   \n\n    const addTransaction = async (transaction) => {\n        const response = await fetch(`http://localhost:5000/api/v1/transactions`, {\n            method: 'POST', \n            \n            headers: {\n              'Content-Type': 'application/json',\n              \"auth-token\":localStorage.getItem('token')\n            },\n            body: JSON.stringify({transaction}) \n         });\n        const trans=await response.json; \n        dispatch({ type: 'ADD_TRANSACTION', payload: trans})\n    }\n\n\n    const deleteTransaction =async (id) => {\n        const response = await fetch(`http://localhost:5000/api/v1/transactions/{id}`, {\n            method: 'DELETE', \n            \n            headers: {\n              'Content-Type': 'application/json',\n              \"auth-token\":localStorage.getItem('token')\n            },\n           });\n        dispatch({ type: 'DELETE_TRANSACTION', payload: id })\n    }\n\n    const balance = transactions.reduce((acc, currVal) => (currVal.type === 'Expense' ? acc - currVal.amount : acc + currVal.amount), 0);\n\n    console.log(transactions);\n\n    return (\n        <ExpenseTrackerContext.Provider value={{\n            getTransactions,\n            deleteTransaction,\n            addTransaction,\n            transactions,\n            balance\n        }}>\n            {children}\n        </ExpenseTrackerContext.Provider>\n    )\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,aAA5B,QAAiD,OAAjD;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AAGA,MAAMC,YAAY,GAAG;EACjBC,YAAY,EAAC;AADI,CAArB;AAIA,OAAO,MAAMC,qBAAqB,gBAAGJ,aAAa,CAACE,YAAY,CAACC,YAAd,CAA3C;AAEP,OAAO,MAAME,QAAQ,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACtC,MAAM,CAACH,YAAD,EAAeI,QAAf,IAA2BR,UAAU,CAACE,cAAD,EAAiBC,YAAY,CAACC,YAA9B,CAA3C,CADsC,CAGtC;;EAEA,MAAMK,eAAe,GAAC,MAAOL,YAAP,IAAsB;IACxC,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,2CAAF,EAA8C;MACtEC,MAAM,EAAE,KAD8D;MAGtEC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,cAAaC,YAAY,CAACC,OAAb,CAAqB,OAArB;MAFN;IAH6D,CAA9C,CAA5B;IAUC,MAAMC,IAAI,GAAC,MAAMN,QAAQ,CAACM,IAAT,EAAjB;IACAR,QAAQ,CAAC;MACNS,IAAI,EAAE,kBADA;MAENC,OAAO,EAAEF;IAFH,CAAD,CAAR;EAKJ,CAjBD;;EAsBA,MAAMG,cAAc,GAAG,MAAOC,WAAP,IAAuB;IAC1C,MAAMV,QAAQ,GAAG,MAAMC,KAAK,CAAE,2CAAF,EAA8C;MACtEC,MAAM,EAAE,MAD8D;MAGtEC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,cAAaC,YAAY,CAACC,OAAb,CAAqB,OAArB;MAFN,CAH6D;MAOtEM,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAACH;MAAD,CAAf;IAPgE,CAA9C,CAA5B;IASA,MAAMI,KAAK,GAAC,MAAMd,QAAQ,CAACM,IAA3B;IACAR,QAAQ,CAAC;MAAES,IAAI,EAAE,iBAAR;MAA2BC,OAAO,EAAEM;IAApC,CAAD,CAAR;EACH,CAZD;;EAeA,MAAMC,iBAAiB,GAAE,MAAOC,EAAP,IAAc;IACnC,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAAE,gDAAF,EAAmD;MAC3EC,MAAM,EAAE,QADmE;MAG3EC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,cAAaC,YAAY,CAACC,OAAb,CAAqB,OAArB;MAFN;IAHkE,CAAnD,CAA5B;IAQAP,QAAQ,CAAC;MAAES,IAAI,EAAE,oBAAR;MAA8BC,OAAO,EAAEQ;IAAvC,CAAD,CAAR;EACH,CAVD;;EAYA,MAAMC,OAAO,GAAGvB,YAAY,CAACwB,MAAb,CAAoB,CAACC,GAAD,EAAMC,OAAN,KAAmBA,OAAO,CAACb,IAAR,KAAiB,SAAjB,GAA6BY,GAAG,GAAGC,OAAO,CAACC,MAA3C,GAAoDF,GAAG,GAAGC,OAAO,CAACC,MAAzG,EAAkH,CAAlH,CAAhB;EAEAC,OAAO,CAACC,GAAR,CAAY7B,YAAZ;EAEA,oBACI,oBAAC,qBAAD,CAAuB,QAAvB;IAAgC,KAAK,EAAE;MACnCK,eADmC;MAEnCgB,iBAFmC;MAGnCN,cAHmC;MAInCf,YAJmC;MAKnCuB;IALmC,CAAvC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAOKpB,QAPL,CADJ;AAWH,CArEM;;GAAMD,Q;;KAAAA,Q"},"metadata":{},"sourceType":"module"}